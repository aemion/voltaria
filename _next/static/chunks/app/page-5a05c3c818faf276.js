(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4371:(e,t,i)=>{Promise.resolve().then(i.bind(i,1840)),Promise.resolve().then(i.t.bind(i,5717,23))},1840:(e,t,i)=>{"use strict";i.d(t,{default:()=>E});var r=i(5155),s=i(2115);function n(e){let{x:t,y:i,size:s,symbol:n,isHighlighted:o,onMouseDown:l,isActive:a=!1}=e,u={x:t*s+1,y:i*s+1},c={x:u.x+s/2,y:u.y+s/2,dominantBaseline:"middle",textAnchor:"middle"},h={x1:c.x,x2:c.x,y1:c.y-s/3,y2:c.y+s/5};return(0,r.jsxs)("g",{...u,width:s,height:s,onMouseDown:l,children:[(0,r.jsx)("rect",{...u,width:s,height:s,fill:o?"yellow":"#"!==n?"transparent":"#000",stroke:"black",strokeWidth:1}),(0,r.jsx)("text",{...c,width:s,height:s,children:n}),a&&(0,r.jsx)("line",{...h,stroke:"black",children:(0,r.jsx)("animate",{attributeName:"stroke",values:"black;transparent",dur:"1s",calcMode:"discrete",repeatCount:"indefinite"})})]})}class o{add(e){return new o(e.x+this.x,e.y+this.y)}equals(e){return this.x===e.x&&this.y===e.y}opposite(){return new o(-this.x,-this.y)}constructor(e,t){this.x=e,this.y=t}}var l=function(e){return e.Horizontal="H",e.Vertical="V",e}({});class a{constructor(e){this.direction=e,"H"===this.direction?this.vector=new o(0,1):this.vector=new o(1,0)}}a.Horizontal=new a("H"),a.Vertical=new a("V");class u{key(){return"".concat(this.start.x,":").concat(this.start.y,":").concat(this.direction.direction)}withClue(e){return new u(this.start,this.direction,e)}constructor(e,t,i){this.start=e,this.direction=t,this.clue=i}}class c{static fromGrid(e){let t=[];return[a.Horizontal,a.Vertical].forEach(i=>{let r=0,s=new o(0,0);e.getCells(i.direction).forEach(e=>{let{position:n,value:o,isLast:l}=e;0===r&&(s=n),l||"#"===o?(r>1&&t.push(new u(s,i,"")),r=0):r++})}),new c(t)}withClue(e){if(this.clues[e.key()]===e)return this;let t=new c([]);return t.clues=Object.assign(this.clues,{[e.key()]:e}),t}getClues(){return this.clues}getHorizontal(){return Object.values(this.clues).filter(e=>e.direction.direction===l.Horizontal)}getVertical(){return Object.values(this.clues).filter(e=>e.direction.direction===l.Horizontal)}getHorizontalGroupedByRow(){var e,t;let i=this.getHorizontal().toSorted((e,t)=>e.start.x-t.start.x),r=[];return i.forEach(i=>((e=r)[t=i.start.y]||(e[t]=[])).push(i)),r}getVerticalGroupedByColumn(){var e,t;let i=this.getVertical().toSorted((e,t)=>e.start.y-t.start.y),r=[];return i.forEach(i=>((e=r)[t=i.start.y]||(e[t]=[])).push(i)),r}constructor(e){this.clues=Object.fromEntries(e.map(e=>[e.key(),e]))}}var h=function(e){return e[e.Solve=0]="Solve",e[e.Build=1]="Build",e}({});class d{withValue(e,t){return this.isEditable(e)&&("#"!==t||0!==this.mode)?new d(this.values.with(this.toIndex(e),t),this.width,this.mode,this.clueCollection):this}clean(){return new d(this.values.map(e=>"#"===e?"#":""),this.width,this.mode,this.clueCollection)}isInside(e){return e.x<this.width&&e.x>=0&&e.y<this.height&&e.y>=0}isValueWritable(e){return"#"!==e||0!==this.mode}isEditable(e){return!!this.isInside(e)&&(1===this.mode||"#"!==this.getValue(e))}toIndex(e){return e.x+e.y*this.width}toPosition(e){return new o(e%this.width,Math.floor(e/this.width))}getCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Horizontal;return this.values.map((t,i)=>{let r=e===l.Horizontal?i:i%this.height*this.width+Math.floor(i/this.height),s=e===l.Horizontal?this.width:this.height,n=i%s;return{position:this.toPosition(r),value:this.values[r],isFirst:0===n,isLast:n===s-1}})}getValue(e){return this.values[this.toIndex(e)]}constructor(e,t,i,r){if(this.values=e,this.width=t,this.mode=i,!Number.isInteger(t))throw Error("Width must be integer");let s=e.length;if(0===s||s%t!=0)throw Error("Incorrect number of values in grid");this.height=s/t,this.clueCollection=r||c.fromGrid(this)}}let p=["BAUDELAIRE","ACTIVATION","R##CENT#GN","R#OT#CEANS","IP#E#EIRE#","CALECONS#V","ANA#ALTERE","DA#KLEENEX","EMOI#E#IVE","RAMPES#CES"].map(e=>e.split("")).flat(),g=new d(p,10,h.Solve),m=["Po\xe8te fran\xe7ais","Mise en marche","Unit\xe9 divisionnaire de l'euro","Guin\xe9e","Office de tourisme","Ici m\xeame","Institut polytechnique","Irlande ga\xe9lique","Sous-v\xeatements","Cahier de textes","D\xe9t\xe9rior\xe9","Accord russe","Mouchoir en papier","\xc9motion soudaine","Bugle","Plans inclin\xe9s","Coll\xe8ge","Fermer solidement","Actinium","Pays d'Am\xe9rique centrale","Ancien do","Donne le ton","Club marseillais","Exercice litt\xe9raire","Monnaie du Laos","Premi\xe8re femme","Durcissement de l'\xe9piderme","Finies en pointe","Pr\xe9judice","Deux romain","Poison","Mauvaise humeur","Songe","Affluent du Danube","Contraries"],w=Object.values(g.clueCollection.getClues()).map((e,t)=>e.withClue(m[t])),v=new d(p,10,h.Solve,new c(w)).clean();var f=i(5053),x=i.n(f);function E(){let[e,t]=(0,s.useState)(v),[i,l]=(0,s.useState)(new o(0,0)),[u,c]=(0,s.useState)(new o(1,0)),[h,d,p]=function(){let e=(0,s.useRef)(null),[t,i]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let t=e.current;if(t){let e=()=>i(!0);t.addEventListener("focus",e);let r=()=>i(!1);return t.addEventListener("blur",r),t.focus(),()=>{t.removeEventListener("focus",e),t.removeEventListener("blur",r)}}},[]),[e,t,i=>{i!==t&&e.current&&(!0===i&&e.current!==document.activeElement?e.current.focus():!0===i&&e.current===document.activeElement&&e.current.blur())}]}(),[g,m]=(0,s.useState)(""),w=t=>{let r=i.add(t);e.isEditable(r)&&l(r)},f=e=>{let t={ArrowDown:a.Horizontal.vector,ArrowUp:a.Horizontal.vector.opposite(),ArrowLeft:a.Vertical.vector.opposite(),ArrowRight:a.Vertical.vector}[e.code];void 0!==t&&(e.preventDefault(),c(new o(Math.abs(t.x),Math.abs(t.y))),m(""),w(t))},E=r=>{e.isEditable(i)&&["Delete","Backspace"].includes(r.key)&&(t(e.withValue(i,"")),"Backspace"===r.key&&w(u.opposite()),r.preventDefault(),m(g.slice(0,-1)))},y=(t,i)=>{t.preventDefault(),e.isEditable(i)&&(l(i),p(!0))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:x().input,value:g,type:"text",onKeyDown:e=>{f(e),E(e)},onChange:r=>{let s=r.target.value,n=s.slice(-1).toUpperCase();s.length===g.length+1&&(0===n.length||!(n.length>1)&&("#"===n||function(e){if(1!==e.length)return!1;let t=e.charCodeAt(0);return t>=65&&t<=90}(n)))&&e.isValueWritable(n)&&(t(e.withValue(i,n)),m("".concat(g).concat(n)),w(u))},ref:h}),(0,r.jsx)("svg",{className:x().grid,width:40*e.width+1,height:40*e.height+1,shapeRendering:"crispEdges",children:e.getCells().map(t=>{let{position:s,value:o}=t;return(0,r.jsx)(n,{symbol:o,...s,size:40,isHighlighted:s.equals(i)&&d,isActive:s.equals(i)&&d,onMouseDown:e=>y(e,s)},e.toIndex(s))})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Horizontal"}),(0,r.jsx)("ul",{children:e.clueCollection.getHorizontalGroupedByRow().map((e,t)=>(0,r.jsx)("li",{children:e.map(e=>e.clue).join(". ")},t))}),(0,r.jsx)("h1",{children:"Vertical"}),(0,r.jsx)("ul",{children:e.clueCollection.getVerticalGroupedByColumn().map((e,t)=>(0,r.jsx)("li",{children:e.map(e=>e.clue).join(". ")},t))})]})]})}},5053:e=>{e.exports={input:"crosswords_input__9Owav",grid:"crosswords_grid__uNDTh"}},5717:e=>{e.exports={page:"page_page__556_G",main:"page_main__nw1Wk",ctas:"page_ctas__rfsth",primary:"page_primary__2CBMe",secondary:"page_secondary__jzhTV",footer:"page_footer__F3MD0",logo:"page_logo__ikIZE"}}},e=>{var t=t=>e(e.s=t);e.O(0,[329,441,517,358],()=>t(4371)),_N_E=e.O()}]);