(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6906:(e,t,i)=>{Promise.resolve().then(i.bind(i,2982))},2982:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>b});var r=i(5155),s=i(5717),n=i.n(s),o=i(2115);function l(e){let{x:t,y:i,size:s,symbol:n,isHighlighted:o,onMouseDown:l,isActive:a=!1}=e,u={x:t*s+1,y:i*s+1},c={x:u.x+s/2,y:u.y+s/2,dominantBaseline:"middle",textAnchor:"middle"},h={x1:c.x,x2:c.x,y1:c.y-s/3,y2:c.y+s/5};return(0,r.jsxs)("g",{...u,width:s,height:s,onMouseDown:l,children:[(0,r.jsx)("rect",{...u,width:s,height:s,fill:o?"yellow":"#"!==n?"transparent":"#000",stroke:"black",strokeWidth:1}),(0,r.jsx)("text",{...c,width:s,height:s,children:n}),a&&(0,r.jsx)("line",{...h,stroke:"black",children:(0,r.jsx)("animate",{attributeName:"stroke",values:"black;transparent",dur:"1s",calcMode:"discrete",repeatCount:"indefinite"})})]})}class a{add(e){return new a(e.x+this.x,e.y+this.y)}equals(e){return this.x===e.x&&this.y===e.y}opposite(){return new a(-this.x,-this.y)}constructor(e,t){this.x=e,this.y=t}}var u=i(5053),c=i.n(u),h=function(e){return e.Horizontal="H",e.Vertical="V",e}({});class d{constructor(e){this.direction=e,"H"===this.direction?this.vector=new a(0,1):this.vector=new a(1,0)}}function g(e){let{grid:t,onChange:i}=e,[s,n]=(0,o.useState)(new a(0,0)),[u,h]=(0,o.useState)(new a(1,0)),[g,m,p]=function(){let e=(0,o.useRef)(null),[t,i]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let t=e.current;if(t){let e=()=>i(!0);t.addEventListener("focus",e);let r=()=>i(!1);return t.addEventListener("blur",r),t.focus(),()=>{t.removeEventListener("focus",e),t.removeEventListener("blur",r)}}},[]),[e,t,i=>{i!==t&&e.current&&(!0===i&&e.current!==document.activeElement?e.current.focus():!0===i&&e.current===document.activeElement&&e.current.blur())}]}(),[w,f]=(0,o.useState)(""),x=e=>{let i=s.add(e);t.isEditable(i)&&n(i)},v=e=>{let t={ArrowDown:d.Horizontal.vector,ArrowUp:d.Horizontal.vector.opposite(),ArrowLeft:d.Vertical.vector.opposite(),ArrowRight:d.Vertical.vector}[e.code];void 0!==t&&(e.preventDefault(),h(new a(Math.abs(t.x),Math.abs(t.y))),f(""),x(t))},E=e=>{t.isEditable(s)&&["Delete","Backspace"].includes(e.key)&&(i(t.withValue(s,"")),"Backspace"===e.key&&x(u.opposite()),e.preventDefault(),f(w.slice(0,-1)))},y=(e,i)=>{e.preventDefault(),t.isEditable(i)&&(n(i),p(!0))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:c().input,value:w,type:"text",onKeyDown:e=>{v(e),E(e)},onChange:e=>{let r=e.target.value,n=r.slice(-1).toUpperCase();r.length===w.length+1&&(0===n.length||!(n.length>1)&&("#"===n||function(e){if(1!==e.length)return!1;let t=e.charCodeAt(0);return t>=65&&t<=90}(n)))&&t.isValueWritable(n)&&(i(t.withValue(s,n)),f("".concat(w).concat(n)),x(u))},ref:g}),(0,r.jsx)("svg",{className:c().grid,width:40*t.width+1,height:40*t.height+1,shapeRendering:"crispEdges",children:t.getCells().map(e=>{let{position:i,value:n}=e;return(0,r.jsx)(l,{symbol:n,...i,size:40,isHighlighted:i.equals(s)&&m,isActive:i.equals(s)&&m,onMouseDown:e=>y(e,i)},t.toIndex(i))})})]})}d.Horizontal=new d("H"),d.Vertical=new d("V");class m{key(){return"".concat(this.start.x,":").concat(this.start.y,":").concat(this.direction.direction)}withClue(e){return new m(this.start,this.direction,e)}constructor(e,t,i){this.start=e,this.direction=t,this.clue=i}}class p{static fromGrid(e){let t=[];return[d.Horizontal,d.Vertical].forEach(i=>{let r=0,s=new a(0,0);e.getCells(i.direction).forEach(e=>{let{position:n,value:o,isLast:l}=e;0===r&&(s=n),l||"#"===o?(r>1&&t.push(new m(s,i,"")),r=0):r++})}),new p(t)}withClue(e){if(this.clues[e.key()]===e)return this;let t=new p([]);return t.clues=Object.assign(this.clues,{[e.key()]:e}),t}getClues(){return this.clues}getHorizontal(){return Object.values(this.clues).filter(e=>e.direction.direction===h.Horizontal)}getVertical(){return Object.values(this.clues).filter(e=>e.direction.direction===h.Horizontal)}getHorizontalGroupedByRow(){var e,t;let i=this.getHorizontal().toSorted((e,t)=>e.start.x-t.start.x),r=[];return i.forEach(i=>((e=r)[t=i.start.y]||(e[t]=[])).push(i)),r}getVerticalGroupedByColumn(){var e,t;let i=this.getVertical().toSorted((e,t)=>e.start.y-t.start.y),r=[];return i.forEach(i=>((e=r)[t=i.start.y]||(e[t]=[])).push(i)),r}constructor(e){this.clues=Object.fromEntries(e.map(e=>[e.key(),e]))}}var w=function(e){return e[e.Solve=0]="Solve",e[e.Build=1]="Build",e}({});class f{withValue(e,t){return this.isEditable(e)&&("#"!==t||0!==this.mode)?new f(this.values.with(this.toIndex(e),t),this.width,this.mode,this.clueCollection):this}clean(){return new f(this.values.map(e=>"#"===e?"#":""),this.width,this.mode,this.clueCollection)}isInside(e){return e.x<this.width&&e.x>=0&&e.y<this.height&&e.y>=0}isValueWritable(e){return"#"!==e||0!==this.mode}isEditable(e){return!!this.isInside(e)&&(1===this.mode||"#"!==this.getValue(e))}toIndex(e){return e.x+e.y*this.width}toPosition(e){return new a(e%this.width,Math.floor(e/this.width))}getCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.Horizontal;return this.values.map((t,i)=>{let r=e===h.Horizontal?i:i%this.height*this.width+Math.floor(i/this.height),s=e===h.Horizontal?this.width:this.height,n=i%s;return{position:this.toPosition(r),value:this.values[r],isFirst:0===n,isLast:n===s-1}})}getValue(e){return this.values[this.toIndex(e)]}constructor(e,t,i,r){if(this.values=e,this.width=t,this.mode=i,!Number.isInteger(t))throw Error("Width must be integer");let s=e.length;if(0===s||s%t!=0)throw Error("Incorrect number of values in grid");this.height=s/t,this.clueCollection=r||p.fromGrid(this)}}let x=["BAUDELAIRE","ACTIVATION","R##CENT#GN","R#OT#CEANS","IP#E#EIRE#","CALECONS#V","ANA#ALTERE","DA#KLEENEX","EMOI#E#IVE","RAMPES#CES"].map(e=>e.split("")).flat(),v=new f(x,10,w.Solve),E=["Po\xe8te fran\xe7ais","Mise en marche","Unit\xe9 divisionnaire de l'euro","Guin\xe9e","Office de tourisme","Ici m\xeame","Institut polytechnique","Irlande ga\xe9lique","Sous-v\xeatements","Cahier de textes","D\xe9t\xe9rior\xe9","Accord russe","Mouchoir en papier","\xc9motion soudaine","Bugle","Plans inclin\xe9s","Coll\xe8ge","Fermer solidement","Actinium","Pays d'Am\xe9rique centrale","Ancien do","Donne le ton","Club marseillais","Exercice litt\xe9raire","Monnaie du Laos","Premi\xe8re femme","Durcissement de l'\xe9piderme","Finies en pointe","Pr\xe9judice","Deux romain","Poison","Mauvaise humeur","Songe","Affluent du Danube","Contraries"],y=Object.values(v.clueCollection.getClues()).map((e,t)=>e.withClue(E[t])),_=new f(x,10,w.Solve,new p(y)).clean();function C(e){let{clues:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Horizontal"}),(0,r.jsx)("ul",{children:t.getHorizontalGroupedByRow().map((e,t)=>(0,r.jsx)("li",{children:e.map(e=>e.clue).join(". ")},t))}),(0,r.jsx)("h2",{children:"Vertical"}),(0,r.jsx)("ul",{children:t.getVerticalGroupedByColumn().map((e,t)=>(0,r.jsx)("li",{children:e.map(e=>e.clue).join(". ")},t))})]})}function b(){let[e,t]=(0,o.useState)(_);return(0,r.jsxs)("div",{className:n().page,children:[(0,r.jsxs)("main",{className:n().main,children:[(0,r.jsx)(g,{grid:e,onChange:e=>t(e)}),(0,r.jsx)(C,{clues:e.clueCollection})]}),(0,r.jsx)("footer",{className:n().footer})]})}},5053:e=>{e.exports={input:"crosswords_input__9Owav",grid:"crosswords_grid__uNDTh"}},5717:e=>{e.exports={page:"page_page__556_G",main:"page_main__nw1Wk",ctas:"page_ctas__rfsth",primary:"page_primary__2CBMe",secondary:"page_secondary__jzhTV",footer:"page_footer__F3MD0",logo:"page_logo__ikIZE"}}},e=>{var t=t=>e(e.s=t);e.O(0,[329,441,517,358],()=>t(6906)),_N_E=e.O()}]);